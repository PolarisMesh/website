---
title: "简介"
linkTitle: "简介"
description: "介绍北极星的背景、架构、功能，方便用户了解北极星能解决什么问题"
weight: 1
---

北极星是腾讯开源的服务治理平台，致力于解决分布式和微服务架构中的服务管理、流量管理、配置管理、故障容错和可观测性问题，针对不同的技术栈和基础设施提供服务治理的标准方案和最佳实践。下面介绍北极星的功能特性、系统组件、应用场景和常见问题。

## 北极星诞生的背景

让我们回顾一下应用架构发现的历程：

![](../图片/简介/单体到微服务.png)

### 单体架构：

单体架构的所有代码都在一个应用中，单体架构具备系统复杂度低，部署简单，易运维等优点，适合小规模或者初创期的业务。但随着应用模块和开发人员增加，单体应用面临众多问题，例如：

- 变更成本高：任何修改需要重新部署整个系统；
- 扩展性差：无法针对某些热点模块进行水平扩展；
- 故障扩散：某个模块出现故障也会影响其他模块；

### 微服务架构

对单体架构中的每一层进行细粒度的拆分，可以拆分成整体更松散，模块更内聚的微服务架构。

微服务架构具备职责单一、平台无关的通信、独立性、进程隔离的特点。

微服务架构具备以下优点：

- 服务作为组件，可独立部署，独立变更，独立扩缩容。
- 团队管理变简单，可围绕业务来划分团队。
- 技术选择可多样性
- 业务进程及数据独立，故障不会相互影响。

### 微服务架构的实施中的核心问题

![](../图片/简介/微服务架构核心问题.png)

北极星主要解决的是“服务发现及治理”的问题。

## 北极星具备哪些功能

![](../图片/简介/功能特性.png)

北极星具备服务管理、流量管理、熔断降级、配置管理和可观测性五大功能：

- `服务管理`：包含服务发现、服务注册、健康检查和元数据管理等功能。健康检查是指，北极星支持服务实例上报心跳，通过心跳判断服务实例是否健康，及时剔除不健康的服务实例。元数据管理支持在服务和服务实例上配置协议、版本和位置等信息，实现协议转换、灰度发布和就近访问等业务需求。

- `流量管理`：包含动态路由、负载均衡、访问限流和访问鉴权等功能。动态路由是指，北极星支持用户自定义路由策略，将服务的部分请求路由到指定实例，用于解决测试环境、灰度发布和就近访问等大量业务场景的流量调度问题。负载均衡支持根据权重轮训、根据权重随机和根据权重一致性 Hash 等算法。访问限流支持本地和分布式两种模式，被限流的请求支持排队和自定义响应。

- `熔断降级`：包含服务熔断和节点熔断等功能。服务熔断对服务或者接口进行熔断，如果服务或者接口发生熔断，直接返回自定义响应。节点熔断对服务实例进行熔断，北极星不会将请求路由到熔断的服务实例，避免请求失败。支持请求返回码和延时大小作为错误判断条件，支持连续错误数和错误率作为熔断触发条件。

- `配置管理`：包含配置变更、配置校验、版本管理和灰度发布等功能。

- `可观测性`：提供路由、限流、鉴权和熔断的监控视图。

北极星的功能需要控制面和数据面配合实现：

- `控制面`：负责服务和配置数据的管理和下发，负责流量管理和熔断降级策略的管理和下发。

- `数据面`：负责全部服务发现和治理功能的客户端实现，采用插件化设计，支持按需加载和使用。

数据面功能分为三个部分：

- `服务作为被调`：当一个服务被其他服务调用时，可以使用服务注册、上报心跳、访问限流和访问鉴权功能。

- `服务作为主调`：当一个服务调用其他服务时，可以使用服务发现、动态路由、负载均衡和熔断降级功能。

- `公共部分`：支持拉取配置数据和上报监控数据。

## 北极星包含哪些组件

![](../图片/简介/系统组件.png)

北极星的系统组件分为控制台、控制面和数据面三个部分：

- `控制台`：提供简单易用的管理页面，支持用户和权限管理。

- `控制面`：包含核心组件 Polaris 和可选的功能组件，核心组件可以满足绝大部分业务需求，可选的功能组件按需部署。

- `数据面`：提供多语言 SDK、开发框架、Java Agent 和网格代理四种形态的实现，满足不同的业务场景和开发模式，支持异构服务的互联互通和统一治理。

控制面组件：

- `Polaris`：支持各种形态的数据面接入，支持服务和配置数据的管理和下发，支持流量管理和熔断降级策略的管理和下发，可以覆盖服务注册中心、服务网格控制面和配置中心的功能。

- `Polaris Controller`：可选的功能组件，支持 K8s 服务同步和网格代理注入。K8s 服务同步将 K8s 服务按需同步到北极星，用户不需要在应用程序里显式地注册服务。网格代理注入按需在应用程序 Pod 里注入北极星 Sidecar，以流量代理的方式实现服务发现和治理功能。

数据面组件：

- `SDK`：北极星提供轻量级的多语言 SDK，使用方法和绝大部分客户端软件类似，用户在应用程序里引入北极星 SDK。这种数据面形态以无流量代理的方式实现服务发现和治理功能，没有额外的性能和资源损耗，不会增加现网运维和问题定位的成本。

- `开发框架`：北极星 SDK 可以被集成到开发框架内部，如果用户使用开发框架，不需要显式地引入北极星 SDK。对于 Spring Cloud、Dubbo 和 gRPC 等开发框架，北极星提供可以无缝集成的依赖包。另外，go-micro、go-kratos、go-zero、GoFrame 和 CloudWeGo 等开发框架社区也提供北极星插件。

- `Java Agent`：对于 Spring Cloud 和 Dubbo 等 Java 开发框架，北极星支持 Java 生态常用的 Agent 接入模式。用户只需要在应用程序的启动命令中引入 Polaris Java Agent，即可将北极星的服务发现和治理功能引入应用程序，不需要改动任何代码和配置文件。

- `网格代理`：北极星网格代理在应用程序 Pod 里注入 Polaris Sidecar 和 Proxy，前者通过劫持 DNS 解析将请求转到后者，后者通过流量代理实现服务发现和治理功能。这种数据面形态适合性能和资源损耗不敏感的业务，要求业务具备网格代理的运维能力。

## 北极星解决哪些问题

在分布式架构及微服务架构实施过程中，业务可能面临以下四类问题。北极星以服务为中心，提供一站式解决方案。

| 问题类型 | 问题示例                                                                       | 解决方案 |
| -------- | ------------------------------------------------------------------------------ | -------- |
| 服务可见 | 主调方如何知道被调方的服务地址                                                 | 注册发现 |
| 配置可见 | 如何实现服务配置的版本管理、动态下发、按需变更。                               | 配置管理 |
| 故障容错 | 当被调方的部分实例异常时，如何屏蔽异常实例，屏蔽之后如何恢复                   | 熔断降级 |
|          | 当某些主调方的请求量过多时，如何限制这些主调方的请求，避免影响其他主调方的请求 | 访问限流 |
| 流量控制 | 被调方包含多个实例，主调方如何确定请求发送到哪个实例，如何保证请求均衡         | 负载均衡 |
|          | 如何实现按地域就近、单元化隔离、金丝雀发布等各种请求调度策略                   | 动态路由 |
|          | 外网到内网的调用链路如何进行加密，消息防窃听                                   | 链路加密 |
|          | 服务资源如何按用户及角色进行授权                                               | 服务鉴权 |
